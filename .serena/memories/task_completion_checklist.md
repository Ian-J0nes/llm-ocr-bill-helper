# 任务完成检查清单

## 代码修改后必须执行的步骤

### 1. 编译检查
```bash
# 编译项目(跳过测试)
./mvnw clean compile -DskipTests
```
- 确保没有编译错误
- 检查依赖是否正确

### 2. 运行测试
```bash
# 运行所有测试
./mvnw test

# 或运行特定测试
./mvnw test -Dtest=TestClassName
```
- 确保所有测试通过
- 新功能应该添加相应测试

### 3. 代码检查要点

#### 安全检查
- [ ] 检查是否有安全漏洞:
  - SQL 注入
  - XSS 攻击
  - 命令注入
  - OWASP Top 10 相关问题
- [ ] 敏感信息是否正确处理(不硬编码在代码中)
- [ ] 认证和授权是否正确实现

#### 代码质量
- [ ] 移除未使用的导入和代码
- [ ] 避免向后兼容的 hack(如重命名未使用变量为 `_var`)
- [ ] 移除调试代码和注释掉的代码
- [ ] 不添加假数据或桩代码到 dev/prod 环境

#### 架构一致性
- [ ] 遵循现有的分层架构
- [ ] 使用项目现有的模式和约定
- [ ] 避免引入不必要的新技术或模式
- [ ] 保持代码组织的一致性

### 4. 功能验证
```bash
# 启动应用
./mvnw spring-boot:run
```
- [ ] 手动测试新功能
- [ ] 验证 API 端点正常工作
- [ ] 检查日志输出是否正常
- [ ] 测试边界情况和错误处理

### 5. 文档更新(如需要)
- [ ] 更新 API 文档 (`api.md`)
- [ ] 更新 README 或 CLAUDE.md(如有架构变更)
- [ ] 添加必要的代码注释

### 6. 代码审查自查
- [ ] 代码是否简洁易读
- [ ] 是否有重复代码可以提取
- [ ] 错误处理是否完善
- [ ] 日志记录是否适当
- [ ] 性能是否有明显问题

## 不同任务类型的特定检查

### API 修改
- [ ] 确保向后兼容或正确处理破坏性变更
- [ ] 更新 Swagger/OpenAPI 注解
- [ ] 测试所有 HTTP 方法和状态码

### 数据库修改
- [ ] 更新 Entity 和 Mapper
- [ ] 考虑数据迁移脚本
- [ ] 测试数据完整性

### AI 功能修改
- [ ] 测试不同的输入场景
- [ ] 验证向量存储正常工作
- [ ] 检查流式响应是否正确

### 前端修改
- [ ] 在微信开发者工具中测试
- [ ] 测试不同的屏幕尺寸
- [ ] 验证 API 调用正确

## Git 提交前
- [ ] 暂存相关文件
- [ ] 编写清晰的提交信息
- [ ] 确保不提交敏感信息(.env 文件等)